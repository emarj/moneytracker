{{define "index"}}

{{template "header" .}}
<form action="/add/" method="POST">
  <input class="form-control" type="date" name="Date" value="{{ Now "2006-01-02"}}"/>
  <select class="form-control" name="Who" >
      {{range $user := .Users}}
        <option value="{{$user}}">{{$user}}</option>
      {{end}}
  </select>
  <input class="form-control" type="text" name="Description" placeholder="Description"/>
  <input class="form-control" type="number" step="0.01" name="Amount" value="0"/>
  <select class="form-control" name="MethodID">
      {{range $pm := .PaymentMethods}}
        <option value="{{$pm.ID}}">{{$pm.Name}}</option>
      {{end}}
  </select>
  <input class="form-control" type="checkbox" name="Shared" id="shared-input"/>
  <input class="form-control" disabled="disabled" type="number" step="5" min="0" max="100" name="ShareQuota" value="50" id="sharequota-input"/>
  <select class="form-control" name="Type" id="type-select">
    <option value="0">Expense</option>
    <option value="1">Transfer</option>
</select>
  <select class="form-control" name="CategoryID" id="category-select" >
      {{range $cat := .Categories}}
        <option value="{{$cat.ID}}">{{$cat.Name}}</option>
      {{end}}
  </select>
 
<input class="form-control" type="checkbox" name="InSheet"/>
  <button type="submit" class="btn btn-primary">Add</button>
  <button type="reset" class="btn btn-warning">Cancel</button>
  
  </form>

<table class="table table-striped">
  <thead>
      <th>Date</th>
      <th>Who</th>
      <th>Description</th>
      <th>Amount</td>
      <th>Method</th>
      <th>Shared</th>
      <th>Quota</th>
      <th>Category</th>
      <th>In Sheet</th>
      <th>Actions</th>
  </thead>
  <tbody>
      {{range $expense := .Expenses}}
      <tr class="{{if eq $expense.Type 1 }}transfer{{else}}expense-{{if IsNeg $expense.Amount}}negative{{else}}positive{{end}}{{end}}">
        <td>{{$expense.Date.Format "02/01/2006" }}</td>
        <td class="text-center">{{$expense.Who }}</td>
        <td>{{$expense.Description }}</td>
        <td class="text-right amount">{{FormatDecimal $expense.Amount }}</td>
        <td class="text-center">{{$expense.Method.Name }}</td>
        <td class="text-center">{{if ne $expense.Type 1}}<input type="checkbox" disabled="disabled"  {{if $expense.Shared}} checked="checked" {{end}}/>{{else}}-{{end}}</td>
        <td class="text-center">{{if $expense.Shared}} {{$expense.ShareQuota}}% {{else}} - {{end}}</td>
        <td class="text-center">{{$expense.Category.Name }}</td>
        <td><input type="checkbox" disabled="disabled"  {{if $expense.InSheet}} checked="checked" {{end}}/></td>
        <td>
          <a class="btn btn-info" href="/view/{{$expense.UUID}}">View</a>
        </td>
      </tr>
    {{end}}
  </tbody>
</table>


{{template "footer" .}} 

{{end}}


